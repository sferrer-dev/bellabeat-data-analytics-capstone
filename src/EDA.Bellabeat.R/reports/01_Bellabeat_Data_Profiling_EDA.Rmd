---
title: "Bellabeat – Data Profiling and Exploratory Data Analysis"
author: "Stef"
date: "`r format(Sys.Date(), '%Y-%m-%d')`"
output:
  html_document:
    theme: cosmo
    highlight: tango
    toc: true
    toc_depth: 3
    toc_float: true
    css: styles/styles.css
    number_sections: true
    df_print: paged
    code_folding: hide
---

```{r setup, include=FALSE}
# Global chunk options
knitr::opts_chunk$set(
  echo    = FALSE,
  message = FALSE,
  warning = FALSE
)

# Packages
library(readr)
library(dplyr)
library(purrr)
library(tidyr)
library(skimr)
library(here)
library(knitr)

# Custom project configuration
source(here("config", "config.R"))
# Custom profiling function
source(here("scripts", "profile_csv.R"))

# Avoid scientific notation by default
options(scipen = 999)
```

```{r}
# ---- Batch profiling of all CSV files ----

# Retrieve the list of all CSV files located in the data directory.
# - pattern = "\\.csv$"   → Only files ending with ".csv"
# - full.names = TRUE     → Return full file paths (needed for reading)
csv_files  <- list.files(here(data_dir), pattern = "\\.csv$", full.names = TRUE)
# Apply the profiling function to each CSV file.
# purrr::map() iterates over the list of file paths and returns
# a list of profiling results (one element per CSV).
profiles <- purrr::map(csv_files, profile_csv)
```


# dailyActivity_merged.csv

```{r profile-daily-activity, message=TRUE}
res_daily <- profile_csv(
  here("../../data-samples", "dailyActivity_merged.csv")
)
```

## Kable

``` {r show-column-level-profile, echo=TRUE}
kable(res_daily$col_profile, caption = "Column-Level Profile")
```

```{r show-numeric-variables-stats, echo=TRUE, message=TRUE}
kable(res_daily$num_stats,caption = "Summary of Numeric Variables")
```

## Skim profile

```{r show-skim-profile}
res_daily$skim
```
## Glimpse

```{r show-structural-variable, echo=TRUE}
dplyr::glimpse(res_daily$data)
```
